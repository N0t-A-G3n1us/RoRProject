<% provide(:title, "Teams list") %>

<p id="notice"><%= notice %></p>

<h1>Teams</h1>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Boss</th>
      <th>Invite</th>
      <th>Match</th>
      <th>Challenge</th>
      <th>Member</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @teams.all.each do |team| %>
      <tr>
        <td> <%= image_tag team.avatar.url(:thumb),width: 60, class: "avatar-image " %>
</td>
        <td><%= team.name %></td>
        <td><%= team.boss.username unless team.boss.nil? %></td>
        <td><%= team.invites.map{|m| m.username} %></td>
        <td><%= team.matches.to_a %></td>
        <td><%= team.challenges.to_a %></td>
        <td><% team.gamers.each do |mem| %>
          <%= mem.username %> -> <%=mem.email %>
          <%end%>
        </td>
        <td><%= link_to 'Show', team %></td>
        <td><%= link_to 'Edit', edit_team_path(team) %></td>
        <td><%= link_to 'Destroy', team, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>
<%= link_to 'Back', arena_path %>
<% if current_gamer.admin? %>
<%= link_to 'New Team', new_team_path %>
<%end%>
